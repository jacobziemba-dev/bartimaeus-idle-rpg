<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bartimaeus Idle RPG</title>
    <link rel="stylesheet" href="src/styles/main.css" />
    <link rel="stylesheet" href="src/styles/battle.css" />
  </head>
  <body>
    <!-- Main Game Container -->
    <div id="game-container">
      <!-- Top UI Bar: Resources Display -->
      <div id="top-bar">
        <div class="resource-display">
          <span class="resource-icon">ğŸ’°</span>
          <span id="gold-display">1000</span>
        </div>
        <div class="resource-display">
          <span class="resource-icon">ğŸ’</span>
          <span id="gem-display">50</span>
        </div>
        <div class="stage-display">
          <span>Stage: <span id="stage-number">1</span></span>
        </div>
      </div>

      <!-- Battle Canvas: Where the action happens -->
      <div id="battle-container">
        <canvas id="battle-canvas" width="800" height="400"></canvas>

        <!-- Battle Controls Overlay -->
        <div id="battle-controls">
          <button id="pause-btn" class="control-btn">â¸ï¸ Pause</button>
          <button id="next-stage-btn" class="control-btn" style="display: none">
            â¡ï¸ Next Stage
          </button>
          <button id="retry-btn" class="control-btn" style="display: none">
            ğŸ”„ Retry
          </button>
          <div
            id="speed-controls"
            style="display: flex; gap: 8px; align-items: center"
          >
            <button class="control-btn speed-btn" data-speed="1">1x</button>
            <button class="control-btn speed-btn" data-speed="2">2x</button>
            <button class="control-btn speed-btn" data-speed="4">4x</button>
          </div>
        </div>
      </div>

      <!-- Bottom Action Buttons -->
      <div id="action-buttons">
        <button class="action-btn" id="upgrade-btn">
          <span class="btn-icon">â¬†ï¸</span>
          <span class="btn-text">Upgrade Heroes</span>
        </button>
        <button class="action-btn" id="afk-rewards-btn">
          <span class="btn-icon">ğŸ</span>
          <span class="btn-text">AFK Rewards</span>
        </button>
      </div>
    </div>

    <!-- Modal: Upgrade Heroes Panel -->
    <div id="upgrade-modal" class="modal" style="display: none">
      <div class="modal-content">
        <div class="modal-header">
          <h2>Upgrade Heroes</h2>
          <button class="close-btn" id="close-upgrade">&times;</button>
        </div>
        <div id="hero-list" class="hero-upgrade-list">
          <!-- Heroes will be populated here by JavaScript -->
        </div>
      </div>
    </div>

    <!-- Modal: AFK Rewards Popup -->
    <div id="afk-modal" class="modal" style="display: none">
      <div class="modal-content afk-loot">
        <h2>AFK Loot!</h2>
        <div class="loot-chest">ğŸ</div>
        <p id="afk-time-away">
          You were away for: <span id="time-away">0m</span>
        </p>
        <div class="afk-rewards">
          <div class="afk-reward">
            <span class="reward-icon">ğŸ’°</span>
            <span id="afk-gold">+0</span>
          </div>
          <div class="afk-reward">
            <span class="reward-icon">ğŸ’</span>
            <span id="afk-gems">+0</span>
          </div>
        </div>
        <button class="action-btn" id="close-afk">Collect</button>
      </div>
    </div>

    <!-- Include all game scripts in order -->
    <!-- Order matters! Classes must be defined before they're used -->
    <script src="src/scripts/hero.js"></script>
    <script src="src/scripts/enemy.js"></script>
    <script src="src/scripts/resources.js"></script>
    <script src="src/scripts/storage.js"></script>
    <script src="src/scripts/battle.js"></script>
    <script src="src/scripts/ui.js"></script>
    <script src="src/scripts/game.js"></script>
  </body>
</html>
