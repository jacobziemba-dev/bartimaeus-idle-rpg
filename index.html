<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Bartimaeus Idle RPG</title>
    <link rel="icon" type="image/svg+xml" href="favicon.ico.svg" />
  </head>
  <body>
    <!-- Loading Screen -->
    <div id="loading-screen" style="display: flex">
      <div class="loading-content">
        <h1>âš”ï¸ Bartimaeus Idle RPG</h1>
        <div class="loading-bar">
          <div id="loading-progress" style="width: 0%"></div>
        </div>
        <p id="loading-text">Loading assets...</p>
      </div>
    </div>

    <!-- Main Game Wrapper: Three-Panel Layout -->
    <div id="game-wrapper" style="display: none">
      <!-- Left Sidebar: Hero Info & Upgrades -->
      <aside id="left-panel">
        <div class="hero-portrait-section">
          <img id="hero-portrait" src="" alt="Bartimaeus" style="display: none" />
          <div class="hero-portrait-placeholder">âš”ï¸</div>
          <h2 id="hero-name">Bartimaeus</h2>
          <div id="hero-level">Level <span>1</span></div>
        </div>

        <div class="hero-stats-section">
          <div class="stat-row">
            <span class="stat-label">â¤ï¸ HP:</span>
            <div class="stat-bar">
              <div class="stat-fill hp-fill"></div>
            </div>
            <span class="stat-text">500/500</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">âš”ï¸ ATK:</span>
            <span id="hero-atk">30</span>
          </div>
          <div class="stat-item">
            <span class="stat-label">ğŸ›¡ï¸ DEF:</span>
            <span id="hero-def">25</span>
          </div>
        </div>

        <div class="resources-section">
          <div class="resource-item">
            <span class="resource-icon">ğŸ’°</span>
            <span id="gold-display">1000</span>
          </div>
          <div class="resource-item">
            <span class="resource-icon">ğŸ’</span>
            <span id="gem-display">50</span>
          </div>
        </div>

        <div class="upgrades-section">
          <h3>Upgrades</h3>
          <button id="upgrade-stats-btn" class="upgrade-btn">
            <span class="upgrade-name">Upgrade Stats</span>
            <span class="upgrade-cost">100 ğŸ’°</span>
          </button>
        </div>

        <div class="skills-section">
          <h3>Active Skills</h3>
          <div id="skill-buttons">
            <!-- Skill buttons added by JavaScript -->
          </div>
        </div>
      </aside>

      <!-- Center Panel: Battle Arena -->
      <main id="center-panel">
        <div id="stage-info">
          <span>Stage: <span id="stage-number">1</span></span>
          <span>Wave: <span id="wave-number">1</span></span>
        </div>

        <div id="battle-container">
          <canvas id="battle-canvas"></canvas>

          <!-- Battle Controls Overlay -->
          <div id="battle-controls">
            <button id="pause-btn" class="control-btn">â¸ï¸ Pause</button>
            <div id="speed-controls">
              <button class="control-btn speed-btn" data-speed="1">1x</button>
              <button class="control-btn speed-btn" data-speed="2">2x</button>
              <button class="control-btn speed-btn" data-speed="4">4x</button>
            </div>
          </div>
        </div>
      </main>

      <!-- Right Sidebar: Adventure Log -->
      <aside id="right-panel">
        <div class="log-header">
          <h3>ğŸ“œ Adventure Log</h3>
          <button id="clear-log-btn" class="icon-btn" title="Clear log">ğŸ—‘ï¸</button>
        </div>

        <div id="adventure-log" class="log-container">
          <!-- Log entries added dynamically -->
        </div>
      </aside>
    </div>

    <!-- Modal: AFK Rewards Popup -->
    <div id="afk-modal" class="modal" style="display: none">
      <div class="modal-content afk-loot">
        <h2>AFK Loot!</h2>
        <div class="loot-chest">ğŸ</div>
        <p id="afk-time-away">
          You were away for: <span id="time-away">0m</span>
        </p>
        <div class="afk-rewards">
          <div class="afk-reward">
            <span class="reward-icon">ğŸ’°</span>
            <span id="afk-gold">+0</span>
          </div>
          <div class="afk-reward">
            <span class="reward-icon">ğŸ’</span>
            <span id="afk-gems">+0</span>
          </div>
        </div>
        <button class="action-btn" id="close-afk">Collect</button>
      </div>
    </div>

    <!-- Vite Entry Point -->
    <script type="module" src="/src/main.ts"></script>
  </body>
</html>
